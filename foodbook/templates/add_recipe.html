{% extends "footer_header.html" %}

{% block css %}
<link rel = 'stylesheet' href = '/static/css/recipe.css'>
<script type='text/javascript' src='/static/js/recipe.js'></script>
{% endblock %}

{% block content %}

<div id = 'recipe-page-wrapper'>
  <div id='recipe-content'>
    <div id = 'recipe-name'>
      <input id='recipe-name-i' value='{{ recipe.name|default:"Untitled Recipe" }}' placeholder='Recipe Name' type='text'/>
      <div id = 'recipe-serve'>Serves: <input type='number' id='recipe-serving-size' value='{{ recipe.serving_size|default:"1" }}'/> person(s)</div>
    </div>

    <div id='recipe-info'>
      <!-- RECIPE SELECT -->
      <div id = 'recipe-selection'>
        <div class = 'recipe-selection-line'>
          <div class = 'recipe-selection-filter'> Filter
          </div>
          <div class = 'simple-search-bar'>
            <input id='ingredient-search' type='text' onkeyup="perform_search()" onpaste="perform_search()" placeholder="Search"/>
          </div>
        </div>
        <div class = 'recipe-selection-line'>
          <div id='type-tabs'>
            <!-- Type tab for all -->
            <div class = 'type-tab'>
              <div class = 'type-tab-text' id = 'type-tab-text-all'>
                <a href="#" class="tab-link" id="all" onclick="change_search('All');">All</a>
              </div>

              <div class = 'type-tab-img' id = "all-img"></div>
            </div>


            <!-- Type tab for others -->
            {% for type in type_list %}
            <div class = 'type-tab'>
              <div class = 'type-tab-text' id = 'type-tab-text-{{ type.1 }}'>
                <a href="#" class="tab-link" id='{{ type.1 }}'onclick="change_search('{{ type.1 }}');">{{ type.0 }}</a>
              </div>
              <div class = 'type-tab-img' id = "{{ type.1 }}-img"></div>
            </div>
            {% endfor %}
          </div>
          <div id = 'recipe-add' class = 'selected'>
            <input id='recipe-id-unique' type='hidden' value='{{ recipe.id }}'/>
            <div class = 'all-ingredients'>
              <div class='ingredient-list' id='ingredient-list'>
              </div>
            </div>
          </div>
        </div>
        <div class = 'recipe-selection-line'>
        </div>
      </div>
      <div class='added-ingredients' id='recipe-list'>
        <div class = 'ingredients-title'>
          Ingredients
        </div>
        {% for ingredient in ingredient_list %}
        <div class='ingredient-line' id='ingredient_line_{{ ingredient.ingredient_id }}'>
          {{ ingredient.name }}<input type='number' size='5' id='ingredient_line_{{ ingredient.ingredient_id }}_number' value={{ingredient.qty }} />
          <select class='ingredient-select' id='ingredient_line_{{ ingredient.ingredient_id }}_select'>
            {% for ss in ingredient.servingsize %}
            <option value='{{ ss.name }}'
            {% if ss.name == ingredient.unit %} selected='selected' {% endif %}>{{ ss.name }}</option>
            {% endfor %}
          </select>
        </div>
        {% endfor %}
      </div>
      <div id='nutritional-info'>
        <div id = 'nutritional-title'> Nutrition Facts
        </div>
        <div id = 'nutritional-facts'>
          <div class='nutritional-column'>
          <div class='nutritional-grid' id='calories'>Calories: <div class='prog-bar green'><span style='width: 5%'></span></div></div>
          <div class='nutritional-grid' id='carbohydrates'>Carbohydrates: <div class='prog-bar green'><span style='width: 15%'></span></div></div>
          <div class='nutritional-grid' id='protein'>Protein <div class='prog-bar green'><span style='width: 25%'></span></div></div>
          <div class='nutritional-grid' id='cholesterol'>Cholesterol: <div class='prog-bar yellow'><span style='width: 35%'></span></div></div>
          <div class='nutritional-grid' id='fiber'>Fiber: <div class='prog-bar yellow'><span style='width: 35%'></span></div></div>
        </div>
        <div class='nutritional-column'>
          <div class='nutritional-grid' id='total-fat'>Total Fat: <div class='prog-bar yellow'><span style='width: 45%'></span></div></div>
          <div class='nutritional-grid' id='saturated'>Saturated: <div class='prog-bar yellow'><span style='width: 55%'></span></div></div>
          <div class='nutritional-grid' id='monounsaturated'>Monounsaturated: <div class='prog-bar yellow'><span style='width: 65%'></span></div></div>
          <div class='nutritional-grid' id='polyunsaturated'>Polyunsaturated: <div class='prog-bar red'><span style='width: 75%'></span></div></div>
          <div class='nutritional-grid' id='trans'>Trans: <div class='prog-bar red'><span style='width: 75%'></span></div></div>
        </div>
        <div class='nutritional-column'>
          <div class='nutritional-grid' id='vita'>Vitamin A: <div class='prog-bar red'><span style='width: 80%'></span></div></div>
          <div class='nutritional-grid' id='vitb6'>Vitamin B6: <div class='prog-bar red'><span style='width: 85%'></span></div></div>
          <div class='nutritional-grid' id='vitb12'>Vitamin B12: <div class='prog-bar red'><span style='width: 95%'></span></div></div>
          <div class='nutritional-grid' id='vitc'>Vitamin C: <div class='prog-bar red'><span style='width: 100%'></span></div></div>
          <div class='nutritional-grid' id='vitd'>Vitamin D: <div class='prog-bar red'><span style='width: 100%'></span></div></div>
        </div>
        <div class='nutritional-column'>
          <div class='nutritional-grid' id='potassium'>Potassium: <div class='prog-bar red'><span style='width: 80%'></span></div></div>
          <div class='nutritional-grid' id='iron'>Iron: <div class='prog-bar red'><span style='width: 85%'></span></div></div>
          <div class='nutritional-grid' id='sodium'>Sodium: <div class='prog-bar red'><span style='width: 95%'></span></div></div>
          <div class='nutritional-grid' id='magnesium'>Magnesium: <div class='prog-bar red'><span style='width: 100%'></span></div></div>
          <div class='nutritional-grid' id='calcium'>Calcium: <div class='prog-bar red'><span style='width: 100%'></span></div></div>
        </div>
        </div>
      </div>
      <div id = 'recipe-instructions-and-descriptions'>
        <textarea id='recipe-description' rows='10' cols='50' value='{{ recipe.description }}' placeholder='Description'>{{ recipe.description }}</textarea>
        <textarea id='recipe-instructions' rows='10' cols='50' value='{{ recipe.instructions }}' placeholder='Instructions'>{{ recipe.instructions }}</textarea>
      </div>

      <div id = 'recipe-summary'></div>
    </div>
  </div>
</div>
<div>
  <button onclick='save_recipe();' id='save-recipe'>Save</button>
  <button onclick='check_nutrients();' id='check-nutr'>Nutrients</button>
  <button onclick='nextContent();' id='next'>Next</button>
  <button onclick='previousContent();' id='prev'>prev</button>
</div>
{% endblock %}